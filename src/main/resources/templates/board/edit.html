<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{layout}" 
      lang="ko">
<head>
    <title>글 수정</title>
    <th:block layout:fragment="css">
        <style>
            .edit-container {
                max-width: 900px;
                margin: 0 auto;
            }
            .form-label {
                font-weight: 600;
                color: #212529;
            }
            .category-select {
                max-width: 200px;
            }
            #content {
                min-height: 400px;
                font-family: inherit;
            }
        </style>
    </th:block>
</head>
<body>
<div layout:fragment="content">
    <div class="container my-5">
        <div class="edit-container">
            <h2 class="fw-bold mb-4">
                <i class="bi bi-pencil-square me-2"></i>글 수정
            </h2>

            <form th:action="@{/board/edit/{id}(id=${post.id})}" method="post">
                <!-- 카테고리 선택 -->
                <div class="mb-3">
                    <label for="category" class="form-label">카테고리</label>
                    <select id="category" 
                            name="category" 
                            class="form-select category-select" 
                            required>
                        <!-- 공지사항은 관리자만 보이게 -->
                        <option value="NOTICE" 
                                sec:authorize="hasRole('ADMIN')"
                                th:selected="${post.category.name() == 'NOTICE'}">
                            공지사항
                        </option>
                        <option value="FREE" 
                                th:selected="${post.category.name() == 'FREE'}">
                            자유게시판
                        </option>
                    </select>
                </div>

                <!-- 제목 -->
                <div class="mb-3">
                    <label for="title" class="form-label">제목</label>
                    <input type="text" 
                           id="title" 
                           name="title" 
                           class="form-control" 
                           th:value="${post.title}"
                           required>
                </div>

                <!-- 내용 -->
                <div class="mb-4">
                    <label for="content" class="form-label">내용</label>
                    <textarea id="content" 
                              name="content" 
                              class="form-control" 
                              required
                              th:text="${post.content}"></textarea>
                </div>

                <!-- 버튼 -->
                <div class="d-flex justify-content-between">
                    <a th:href="@{/board/detail/{id}(id=${post.id})}" class="btn btn-secondary">
                        <i class="bi bi-arrow-left me-2"></i>취소
                    </a>
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-check-circle me-2"></i>수정완료
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>
