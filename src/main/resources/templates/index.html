<!DOCTYPE html>
<html layout:decorate="~{layout}" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>안산시 탁구 협회</title>
    <th:block layout:fragment="css">
        <style>
            /* ⭐⭐⭐ 탁구 애니메이션 스타일 ⭐⭐⭐ */
            .hero-section {
                position: relative;
                background: linear-gradient(135deg, #0056b3 0%, #003d82 100%);
                color: white;
                padding: 120px 0 100px;
                overflow: hidden;
                min-height: 500px;
            }

            /* 탁구대 */
            .ping-pong-table {
                position: absolute;
                bottom: 80px;
                left: 50%;
                transform: translateX(-50%) perspective(600px) rotateX(30deg);
                width: 600px;
                height: 300px;
                background: linear-gradient(to bottom, #2a5298 0%, #1e3a6d 100%);
                border: 8px solid #1a2942;
                border-radius: 8px;
                box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
                z-index: 1;
            }

            /* 탁구공 */
            .ping-pong-ball {
                position: absolute;
                width: 20px;
                height: 20px;
                background: radial-gradient(circle at 30% 30%, #fff, #ff9800, #ff6b00);
                border-radius: 50%;
                box-shadow:
                        0 4px 8px rgba(0, 0, 0, 0.3),
                        inset -2px -2px 4px rgba(0, 0, 0, 0.2),
                        inset 2px 2px 4px rgba(255, 255, 255, 0.5);
                z-index: 10;
                animation: ballBounce 3s cubic-bezier(0.45, 0.05, 0.55, 0.95) infinite;
            }

            /* ⭐⭐⭐ 공 궤적 애니메이션 - 왕복 토스 ⭐⭐⭐ */
            @keyframes ballBounce {
                /* 좌측에서 우측으로 */
                0% {
                    left: 15%;
                    bottom: 200px;
                    transform: scale(1);
                }
                12.5% {
                    left: 30%;
                    bottom: 320px;
                    transform: scale(0.9);
                }
                25% {
                    left: 50%;
                    bottom: 250px;
                    transform: scale(1);
                }
                37.5% {
                    left: 70%;
                    bottom: 340px;
                    transform: scale(0.85);
                }
                50% {
                    left: 85%;
                    bottom: 210px;
                    transform: scale(1);
                }
                /* 우측에서 좌측으로 (반대 방향) */
                62.5% {
                    left: 70%;
                    bottom: 330px;
                    transform: scale(0.9);
                }
                75% {
                    left: 50%;
                    bottom: 260px;
                    transform: scale(1);
                }
                87.5% {
                    left: 30%;
                    bottom: 310px;
                    transform: scale(0.95);
                }
                100% {
                    left: 15%;
                    bottom: 200px;
                    transform: scale(1);
                }
            }

            /* 라켓 (좌측) */
            .paddle-left {
                position: absolute;
                left: 10%;
                bottom: 180px;
                width: 60px;
                height: 70px;
                background: radial-gradient(ellipse at center, #d32f2f 0%, #b71c1c 100%);
                border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
                border: 4px solid #8b0000;
                z-index: 2;
                animation: paddleLeftSwing 3s ease-in-out infinite;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            }

            .paddle-left::after {
                content: '';
                position: absolute;
                bottom: -30px;
                left: 50%;
                transform: translateX(-50%);
                width: 8px;
                height: 30px;
                background: linear-gradient(to bottom, #3e2723, #5d4037);
                border-radius: 4px;
            }

            @keyframes paddleLeftSwing {
                0%, 100% {
                    transform: rotate(-15deg) translateY(0);
                }
                10% {
                    transform: rotate(15deg) translateY(-10px);
                }
                50% {
                    transform: rotate(-10deg) translateY(0);
                }
                85% {
                    transform: rotate(20deg) translateY(-15px);
                }
            }

            /* 라켓 (우측) */
            .paddle-right {
                position: absolute;
                right: 10%;
                bottom: 190px;
                width: 60px;
                height: 70px;
                background: radial-gradient(ellipse at center, #1976d2 0%, #0d47a1 100%);
                border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
                border: 4px solid #003d82;
                z-index: 2;
                animation: paddleRightSwing 3s ease-in-out infinite;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            }

            .paddle-right::after {
                content: '';
                position: absolute;
                bottom: -30px;
                left: 50%;
                transform: translateX(-50%);
                width: 8px;
                height: 30px;
                background: linear-gradient(to bottom, #3e2723, #5d4037);
                border-radius: 4px;
            }

            @keyframes paddleRightSwing {
                0%, 100% {
                    transform: rotate(10deg) translateY(0);
                }
                45% {
                    transform: rotate(-20deg) translateY(-15px);
                }
                55% {
                    transform: rotate(15deg) translateY(-10px);
                }
            }

            /* 배경 장식 원들 */
            .bg-circle {
                position: absolute;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.05);
                animation: float 20s ease-in-out infinite;
            }

            .bg-circle:nth-child(1) {
                width: 300px;
                height: 300px;
                top: -100px;
                left: -100px;
                animation-delay: 0s;
            }

            .bg-circle:nth-child(2) {
                width: 200px;
                height: 200px;
                top: 50%;
                right: -50px;
                animation-delay: 3s;
            }

            .bg-circle:nth-child(3) {
                width: 150px;
                height: 150px;
                bottom: 20%;
                left: 10%;
                animation-delay: 6s;
            }

            @keyframes float {
                0%, 100% {
                    transform: translateY(0) scale(1);
                }
                50% {
                    transform: translateY(-30px) scale(1.1);
                }
            }

            /* 영웅 섹션 콘텐츠 */
            .hero-content {
                position: relative;
                z-index: 10;
                text-align: center;
                padding-top: 40px;
            }

            .hero-section h1 {
                font-size: 3.5rem;
                font-weight: 900;
                text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5);
                margin-bottom: 3rem;
                animation: fadeInDown 1s ease-out;
            }

            .hero-section .btn {
                animation: fadeInUp 1s ease-out 0.6s both;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                transition: all 0.3s ease;
            }

            .hero-section .btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
            }

            @keyframes fadeInDown {
                from {
                    opacity: 0;
                    transform: translateY(-30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            /* 반응형 조정 */
            @media (max-width: 768px) {
                .hero-section {
                    padding: 100px 0 200px;
                    min-height: 600px;
                }

                .hero-section h1 {
                    font-size: 2.5rem;
                }

                .ping-pong-table {
                    width: 400px;
                    height: 200px;
                    bottom: 50px;
                }

                .paddle-left, .paddle-right {
                    width: 40px;
                    height: 50px;
                }

                .ping-pong-ball {
                    width: 15px;
                    height: 15px;
                }
            }

            /* 기존 스타일 유지 */
            .section-title {
                font-size: 2.5rem;
                font-weight: bold;
                margin-bottom: 3rem;
                text-align: center;
                color: var(--primary-color);
                position: relative;
                padding-bottom: 1rem;
            }

            .section-title::after {
                content: '';
                position: absolute;
                bottom: 0;
                left: 50%;
                transform: translateX(-50%);
                width: 80px;
                height: 4px;
                background: linear-gradient(to right, var(--primary-color), var(--accent-color));
                border-radius: 2px;
            }

            .feature-card {
                padding: 2rem;
                border-radius: 12px;
                background: white;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
                height: 100%;
            }

            .feature-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            }

            .feature-card .icon {
                font-size: 3rem;
                color: var(--primary-color);
                margin-bottom: 1rem;
            }

            .match-card {
                background: white;
                border-radius: 12px;
                overflow: hidden;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
            }

            .match-card:hover {
                transform: translateY(-4px);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            }

            .match-card-header {
                background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
                color: white;
                padding: 1rem 1.5rem;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .match-card-body {
                padding: 1.5rem;
            }

            .status-badge {
                padding: 0.4rem 0.8rem;
                border-radius: 20px;
                font-size: 0.85rem;
                font-weight: 600;
            }

            .status-scheduled {
                background: #6c757d;
                color: white;
            }

            .status-in_progress {
                background: #ffc107;
                color: #000;
            }

            .status-completed {
                background: #28a745;
                color: white;
            }

            .player-name {
                font-size: 1.1rem;
                font-weight: 600;
                color: var(--primary-dark);
            }
        </style>
    </th:block>
</head>
<body>
<div layout:fragment="content">
    <!-- ⭐⭐⭐ Hero Section with Ping Pong Animation ⭐⭐⭐ -->
    <section class="hero-section">
        <!-- 배경 장식 원들 -->
        <div class="bg-circle"></div>
        <div class="bg-circle"></div>
        <div class="bg-circle"></div>

        <!-- 탁구대 -->
        <div class="ping-pong-table"></div>

        <!-- 탁구공 -->
        <div class="ping-pong-ball"></div>

        <!-- 라켓 (좌측) -->
        <div class="paddle-left"></div>

        <!-- 라켓 (우측) -->
        <div class="paddle-right"></div>

        <!-- 영웅 섹션 콘텐츠 -->
        <div class="container hero-content">
            <h1 class="display-1">탁구로 하나되는 안산!</h1>
            <div class="d-grid gap-3 d-md-flex justify-content-md-center">
                <a th:href="@{/tournament/list}" class="btn btn-primary btn-lg px-5 fw-bold">
                    <i class="bi bi-trophy-fill me-2"></i>대회 참여하기
                </a>
                <a th:href="@{/calendar}" class="btn btn-outline-light btn-lg px-5 fw-bold">
                    <i class="bi bi-calendar-event-fill me-2"></i>대회 캘린더 보기
                </a>
            </div>
        </div>
    </section>

    <!-- Quick Stats Section -->
    <section class="py-4" style="background: white; box-shadow: 0 4px 16px rgba(0,0,0,0.08);">
        <div class="container">
            <div class="row text-center g-4">
                <div class="col-md-3 col-6">
                    <div class="p-3">
                        <h3 class="fw-bold mb-1" style="color: var(--primary-color);" th:text="${tournaments != null ? tournaments.size() : 0}">0</h3>
                        <p class="mb-0 text-muted">진행 중인 대회</p>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="p-3">
                        <h3 class="fw-bold mb-1" style="color: var(--secondary-color);" th:text="${matches != null ? matches.size() : 0}">0</h3>
                        <p class="mb-0 text-muted">오늘의 경기</p>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="p-3">
                        <h3 class="fw-bold mb-1" style="color: var(--accent-color);" th:text="${players != null ? players.size() : 0}">0</h3>
                        <p class="mb-0 text-muted">등록 선수</p>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="p-3">
                        <h3 class="fw-bold mb-1" style="color: var(--primary-dark);">24</h3>
                        <p class="mb-0 text-muted">보유 탁구대</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Features Section -->
    <section class="py-5">
        <div class="container">
            <h2 class="section-title">주요 서비스</h2>
            <div class="row text-center g-4">
                <div class="col-md-3">
                    <div class="feature-card">
                        <i class="bi bi-calendar-check-fill icon"></i>
                        <h3>대회 캘린더</h3>
                        <p>모든 대회 일정을 한눈에 확인하세요.</p>
                        <a th:href="@{/calendar}" class="btn btn-outline-primary btn-sm">캘린더 보기</a>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="feature-card">
                        <i class="bi bi-trophy-fill icon"></i>
                        <h3>대회 참가</h3>
                        <p>다양한 대회에 참가하고 실력을 겨루세요.</p>
                        <a th:href="@{/tournament/list}" class="btn btn-outline-primary btn-sm">대회 보기</a>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="feature-card">
                        <i class="bi bi-chat-dots-fill icon"></i>
                        <h3>커뮤니티</h3>
                        <p>대회 소식과 자유로운 의견을 공유하세요.</p>
                        <a th:href="@{/board/list}" class="btn btn-outline-primary btn-sm">게시판 보기</a>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="feature-card">
                        <i class="bi bi-star-fill icon"></i>
                        <h3>선수 랭킹</h3>
                        <p>TOP 선수들의 랭킹을 확인하세요.</p>
                        <a th:href="@{/player/ranking}" class="btn btn-outline-primary btn-sm">랭킹 보기</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Today's Matches Section -->
    <section class="py-5" style="background: var(--bg-light);" th:if="${matches != null && !matches.empty}">
        <div class="container">
            <h2 class="section-title">오늘의 경기</h2>
            <div class="row g-4">
                <div class="col-lg-6" th:each="match, matchStat : ${matches}" th:if="${matchStat.index < 4}">
                    <div class="match-card">
                        <div class="match-card-header">
                            <span class="fw-bold" th:text="${match.roundName + ' ' + match.matchNumber + '경기'}">16강 1경기</span>
                            <span class="status-badge" th:classappend="${'status-' + match.status.name().toLowerCase()}"
                                  th:text="${match.status.description}">예정</span>
                        </div>
                        <div class="match-card-body">
                            <div class="player-info d-flex justify-content-between align-items-center mb-3">
                                <span class="player-name" th:text="${match.player1 != null ? match.player1.name : 'BYE'}">선수 1</span>
                                <span class="fw-bold text-muted mx-3">VS</span>
                                <span class="player-name" th:text="${match.player2 != null ? match.player2.name : 'BYE'}">선수 2</span>
                            </div>
                            <div class="d-flex justify-content-between align-items-center text-muted">
                                <small><i class="bi bi-clock me-1"></i><span th:text="${#temporals.format(match.matchTime, 'HH:mm')}">14:00</span></small>
                                <small th:if="${match.tableNumber != null}">
                                    <i class="bi bi-table me-1"></i>탁구대 <span th:text="${match.tableNumber}">1</span>번
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="text-center mt-4">
                <a th:href="@{/tournament/list}" class="btn btn-primary">
                    <i class="bi bi-calendar-event me-2"></i>전체 경기 일정 보기
                </a>
            </div>
        </div>
    </section>

    <!-- Ongoing Tournaments Section -->
    <section class="py-5" th:if="${tournaments != null && !tournaments.empty}">
        <div class="container">
            <h2 class="section-title">진행 중인 대회</h2>
            <div class="row g-4">
                <div class="col-md-6 col-lg-4" th:each="tournament, tournamentStat : ${tournaments}" th:if="${tournamentStat.index < 3}">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5 class="mb-0" th:text="${tournament.title}">대회명</h5>
                        </div>
                        <div class="card-body">
                            <p class="card-text mb-3" th:text="${tournament.description}">대회 설명</p>
                            <ul class="list-unstyled mb-0 small">
                                <li class="mb-2">
                                    <i class="bi bi-calendar-event me-2 text-primary"></i>
                                    <span th:text="${#temporals.format(tournament.startDate, 'yyyy.MM.dd')}"></span>
                                    ~
                                    <span th:text="${#temporals.format(tournament.endDate, 'yyyy.MM.dd')}"></span>
                                </li>
                                <li class="mb-2">
                                    <i class="bi bi-trophy me-2 text-warning"></i>
                                    <span th:text="${tournament.type.description}">경기 유형</span>
                                </li>
                                <li>
                                    <i class="bi bi-people me-2 text-success"></i>
                                    참가자: <span th:text="${tournament.participations != null ? tournament.participations.size() : 0}">0</span>명
                                </li>
                            </ul>
                        </div>
                        <div class="card-footer text-end">
                            <a th:href="@{|/tournament/detail/${tournament.id}|}" class="btn btn-primary btn-sm">
                                <i class="bi bi-arrow-right-circle me-1"></i>자세히 보기
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="text-center mt-4">
                <a th:href="@{/tournament/list}" class="btn btn-primary btn-lg">
                    <i class="bi bi-trophy-fill me-2"></i>전체 대회 보기
                </a>
            </div>
        </div>
    </section>

    <!-- Top Players Section -->
    <section class="py-5" style="background: var(--bg-light);" th:if="${players != null && !players.empty}">
        <div class="container">
            <h2 class="section-title">주요 선수</h2>
            <div class="row g-4">
                <div class="col-md-6 col-lg-3" th:each="player, playerStat : ${players}" th:if="${playerStat.index < 8}">
                    <div class="card h-100 text-center">
                        <div class="card-body">
                            <div class="mb-3">
                                <div style="width: 80px; height: 80px; margin: 0 auto; background: linear-gradient(135deg, var(--primary-color), var(--primary-light)); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <i class="bi bi-person-fill" style="font-size: 3rem; color: white;"></i>
                                </div>
                            </div>
                            <h5 class="fw-bold mb-2" th:text="${player.name}">선수명</h5>
                            <p class="text-muted mb-1" th:if="${player.club != null}">
                                <i class="bi bi-building me-1"></i>
                                <span th:text="${player.club.name}">클럽명</span>
                            </p>
                            <div class="d-flex justify-content-center gap-3 mt-3 small">
                                <span class="badge bg-primary" th:if="${player.ranking != null}">
                                    <i class="bi bi-award me-1"></i>
                                    랭킹 <span th:text="${player.ranking}">1</span>위
                                </span>
                                <span class="badge bg-secondary" th:text="${player.gender}">성별</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="text-center mt-4">
                <a th:href="@{/player/list}" class="btn btn-primary">
                    <i class="bi bi-people-fill me-2"></i>전체 선수 명단
                </a>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="py-5" style="background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%); color: white;">
        <div class="container text-center">
            <h2 class="mb-4 fw-bold">지금 바로 안산시 탁구 협회에 참여하세요!</h2>
            <p class="lead mb-4">다양한 대회와 이벤트에 참가하고, 실력을 향상시킬 수 있는 기회를 놓치지 마세요.</p>
            <div class="d-grid gap-3 d-md-flex justify-content-md-center">
                <a th:href="@{/user/signup}" class="btn btn-light btn-lg px-5 fw-bold" sec:authorize="!isAuthenticated()">
                    <i class="bi bi-person-plus-fill me-2"></i>회원가입
                </a>
                <a th:href="@{/calendar}" class="btn btn-outline-light btn-lg px-5 fw-bold">
                    <i class="bi bi-calendar-event me-2"></i>대회 캘린더
                </a>
            </div>
        </div>
    </section>

</div>
</body>
</html>